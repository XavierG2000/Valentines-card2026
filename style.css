/* style.css */
html { scroll-behavior: smooth; }
* { box-sizing: border-box; margin: 0; padding: 0; }

body{
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  background: radial-gradient(circle at top, #ffeef5 0%, #f8d4df 35%, #f2bed4 70%, #e19ebf 100%);
  color: #3b2433;
  min-height: 100vh;
  overflow-y: auto;
  scroll-snap-type: y mandatory;
  position: relative;
}

/* Layout shell */
.shell{
  display:flex;
  min-height:100vh;
  max-width:1200px;
  margin:0 auto;
  position:relative;
  z-index:1;
}

/* Sidebar */
.sidebar{
  width:240px;
  padding:24px 18px;
  display:flex;
  flex-direction:column;
  justify-content:space-between;
  position:sticky;
  top:0;
  height:100vh;
}

.brand{
  display:flex;
  align-items:center;
  gap:10px;
  margin-bottom:32px;
}
.brand-heart{ font-size:1.8rem; }
.brand-text{ display:flex; flex-direction:column; }

.brand-main{
  font-weight:700;
  letter-spacing:.06em;
  text-transform:uppercase;
  font-size:.9rem;
}
.brand-sub{
  font-size:.72rem;
  opacity:.7;
  text-transform:uppercase;
  letter-spacing:.12em;
}

.nav-list{ display:flex; flex-direction:column; gap:10px; }

.nav-link{
  display:flex;
  align-items:center;
  gap:8px;
  padding:8px 10px;
  border-radius:999px;
  text-decoration:none;
  color:#3b2433;
  font-size:.9rem;
  opacity:.7;
  transition: all .2s ease;
  cursor:pointer;
}

.nav-index{
  font-size:.75rem;
  letter-spacing:.14em;
  text-transform:uppercase;
  opacity:.6;
}

.nav-link:hover{
  background: rgba(255,255,255,.55);
  opacity:1;
  transform: translateX(2px);
}

.nav-link.active{
  background: rgba(255,255,255,.85);
  box-shadow: 0 8px 18px rgba(122,37,73,.18);
  opacity:1;
}

/* Right content area */
.content{ flex:1; padding:36px 24px 36px 10px; }

/* Full-screen scenes */
.section{
  scroll-snap-align:start;
  min-height:100vh;
  display:flex;
  align-items:center;
}

.section-inner{
  width:100%;
  max-width:720px;
  margin:0 auto;
  padding:32px 26px;
  border-radius:32px;
  background: rgba(255,255,255,.86);
  box-shadow: 0 24px 80px rgba(109,35,70,.27);
  position:relative;
  overflow:hidden;
  transform: translateY(20px);
  opacity:0;
  transition: all .7s ease;
}
.section.visible .section-inner{
  transform: translateY(0);
  opacity:1;
}

.scene-label{
  font-size:.8rem;
  text-transform:uppercase;
  letter-spacing:.18em;
  color:#c06c96;
  margin-bottom:6px;
  opacity:.85;
}

.section-header h1,
.section-header h2{
  font-family:"Georgia","Times New Roman",serif;
  color:#471730;
}

.section-header h1.title{
  font-size:2.35rem;
  line-height:1.2;
  display:flex;
  align-items:center;
  gap:10px;
  flex-wrap: wrap;
}

.section-header h2{
  font-size:1.9rem;
  margin-bottom:6px;
}
.section-sub{
  font-size:.95rem;
  opacity:.8;
  margin-top:4px;
}

/* Tiny heart button */
.tiny-heart{
  border-radius:999px;
  border:none;
  background: rgba(255,255,255,.9);
  cursor:pointer;
  padding:5px 8px;
  font-size:.95rem;
  box-shadow: 0 4px 12px rgba(164,47,88,.25);
  transition: transform .15s ease, box-shadow .15s ease;
}
.tiny-heart:hover{
  transform: translateY(-1px) scale(1.03);
  box-shadow: 0 6px 14px rgba(164,47,88,.4);
}

.typewriter{ white-space: pre-line; }

.intro-text{
  margin-top:16px;
  line-height:1.6;
  font-size:1rem;
  color:#5c3144;
}

.intro-actions{
  display:flex;
  flex-wrap:wrap;
  gap:12px;
  margin-top:22px;
}
.center-actions{ justify-content:center; }

.pill-button,
.primary-button{
  border-radius:999px;
  border:none;
  padding:10px 18px;
  font-size:.95rem;
  cursor:pointer;
  transition: all .2s ease;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  text-decoration:none;
}
.pill-button{
  background: rgba(255,255,255,.95);
  color:#6d2044;
  border:1px solid rgba(200,113,153,.4);
}
.pill-button:hover{
  background: rgba(255,255,255,1);
  box-shadow: 0 6px 16px rgba(123,37,75,.2);
}
.primary-button{
  background: linear-gradient(135deg,#f76aa7,#d73c7a);
  color:#fff;
  box-shadow: 0 12px 26px rgba(160,32,80,.45);
}
.primary-button:hover{
  transform: translateY(-1px);
  box-shadow: 0 16px 35px rgba(160,32,80,.6);
}

.intro-note{
  font-size:.9rem;
  margin-top:20px;
  opacity:.85;
  line-height:1.5;
}

/* Love list */
.love-list{
  list-style:none;
  margin-top:18px;
  margin-bottom:22px;
}
.love-list li{
  margin-bottom:8px;
  padding-left:18px;
  position:relative;
  font-size:.95rem;
}
.love-list li::before{
  content:"•";
  position:absolute;
  left:4px;
  top:0;
  color:#d73c7a;
}

/* Centering helpers */
.center-block{ text-align:center; }
.center-buttons{ justify-content:center; }
.center-link{ display:inline-flex; }

/* Mood blocks */
.mood-block{
  margin-top:20px;
  padding:16px 16px 18px;
  border-radius:18px;
  background: rgba(246,225,237,.9);
  border:1px solid rgba(206,130,167,.35);
}
.mood-question{ font-size:.9rem; margin-bottom:10px; }
.mood-question.big-q{ font-size:1rem; font-weight:650; }

.mood-buttons{
  display:flex;
  flex-wrap:wrap;
  gap:8px;
  margin-bottom:8px;
}
.mood-btn{
  border:none;
  border-radius:999px;
  padding:6px 12px;
  font-size:.85rem;
  cursor:pointer;
  background:#fff;
  color:#6b2444;
  box-shadow: 0 4px 10px rgba(138,38,74,.2);
  transition: transform .15s ease, box-shadow .15s ease;
}
.mood-btn:hover{
  transform: translateY(-1px);
  box-shadow: 0 6px 14px rgba(138,38,74,.35);
}
.mood-response{
  font-size:.85rem;
  opacity:.8;
  max-width:520px;
  margin:10px auto 0;
}

/* Valentine mini-game (RUNAWAY NO) */
.valentine-mini{ position:relative; overflow:hidden; }
.valentine-buttons{ position:relative; height:86px; margin-top:10px; }

/* centered start positions */
.valentine-buttons.center-valentine .val-yes{
  left: 50%;
  transform: translateX(-120px);
}
.valentine-buttons.center-valentine .val-no{
  left: 50%;
  transform: translateX(20px);
}
.valentine-buttons.center-valentine .val-btn:hover{
  transform: translateY(-1px);
}

.val-btn{
  position:absolute;
  top:12px;
  border:none;
  border-radius:999px;
  padding:10px 18px;
  font-size:.92rem;
  cursor:pointer;
  transition: transform .15s ease, box-shadow .15s ease, left .12s ease, top .12s ease;
  user-select:none;
  -webkit-tap-highlight-color: transparent;
}
.val-btn:active{ transform: scale(.98); }

.val-yes{
  background: linear-gradient(135deg,#38c172,#1f9d55);
  color:#fff;
  box-shadow: 0 10px 22px rgba(31,157,85,.25);
}
.val-no{
  background: linear-gradient(135deg,#ff5a7a,#d73c7a);
  color:#fff;
  box-shadow: 0 10px 22px rgba(215,60,122,.22);
}
.valentine-result{
  margin-top:10px;
  font-size:.9rem;
  opacity:.85;
}

/* Memories layout (fixed + symmetrical) */
.memories-layout{
  display:grid;
  grid-template-columns: minmax(0, 1.2fr) minmax(0, 0.9fr);
  gap:18px;
  margin-top:16px;
  align-items:start;
}

/* 2x2 grid */
.memories-grid{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap:14px;
}

.memory-card{
  padding:16px 16px 18px;
  border-radius:18px;
  background: rgba(246,225,237,.95);
  border:1px solid rgba(206,130,167,.4);
  cursor:pointer;
  position:relative;
  overflow:hidden;
  transition: transform .15s ease, box-shadow .15s ease;
}
.memory-card:hover{
  transform: translateY(-2px);
  box-shadow: 0 8px 18px rgba(125,33,68,.25);
}
.memory-label{ font-size:.85rem; font-weight:650; margin-bottom:4px; }
.memory-hint{ font-size:.78rem; opacity:.65; margin-bottom:8px; }
.memory-text{
  font-size:.9rem;
  line-height:1.4;
  opacity:0;
  max-height:0;
  transition: opacity .3s ease, max-height .3s ease;
  white-space: pre-line;
}
.memory-card.revealed .memory-text{ opacity:1; max-height:240px; }
.memory-card.revealed .memory-hint{ opacity:0; }

/* Timeline */
.timeline-column{ display:flex; align-items:stretch; }
.mini-timeline{
  border-left:2px solid rgba(194,119,156,.7);
  padding-left:14px;
  display:flex;
  flex-direction:column;
  gap:12px;
}
.timeline-item{ position:relative; padding-left:6px; }
.timeline-item .dot{
  width:9px;height:9px;border-radius:999px;
  background:#fff;
  border:2px solid #c2759b;
  position:absolute;
  left:-19px;
  top:2px;
}
.timeline-item.current .dot{ background:#f76aa7; border-color:#f76aa7; }
.timeline-item .content h3{ font-size:.9rem; margin-bottom:2px; }
.timeline-item .content p{ font-size:.82rem; opacity:.8; }

/* Audio */
.audio-notes{ margin-top:22px; }
.audio-label{ font-size:.88rem; margin-bottom:10px; }
.audio-buttons{ display:flex; flex-wrap:wrap; gap:8px; margin-bottom:6px; }
.audio-btn{
  border-radius:999px;
  border:none;
  padding:7px 12px;
  font-size:.8rem;
  cursor:pointer;
  background: rgba(255,255,255,.95);
  box-shadow: 0 4px 10px rgba(137,39,74,.2);
  color:#6c2343;
  transition: all .15s ease;
}
.audio-btn.playing{
  background: linear-gradient(135deg,#f76aa7,#d73c7a);
  color:#fff;
}

/* Future */
.future-text{ margin-top:16px; font-size:.96rem; line-height:1.6; white-space: pre-line; }
.future-text.ps{ font-size:.9rem; }
.clue{ display:inline-block; margin-top:4px; }
.clue-blank{ border-bottom:1px dashed rgba(90,33,57,.6); }

/* Reveal */
.reveal-button{ margin-top:20px; }
.reveal-message{
  margin-top:18px;
  padding:14px 14px 18px;
  border-radius:18px;
  background: rgba(246,225,237,.95);
  border:1px solid rgba(206,130,167,.45);
  opacity:0;
  transform: translateY(8px);
  max-height:0;
  overflow:hidden;
  transition: all .4s ease;
}
.reveal-message.show{
  opacity:1;
  transform: translateY(0);
  max-height:340px;
}
.replay-note{ font-size:.85rem; opacity:.8; margin-top:16px; }

/* Reservation title card */
.section-reservation .section-inner{
  background: radial-gradient(circle at top, #2c1423 0%, #1a0c16 45%, #150914 100%);
  color:#f7e0ee;
  box-shadow: 0 26px 80px rgba(12,0,8,.9);
}
.section-reservation .scene-label,
.section-reservation .section-sub,
.section-reservation .future-text,
.section-reservation .future-text.ps,
.section-reservation .credits-note{ color:#f7e0ee; }
.section-reservation h2{ color:#ffe6f1; }
.credits-note{ margin-top:26px; font-size:.82rem; opacity:.85; }

/* Secret toast + overlay */
.dim-overlay{
  position:fixed; inset:0;
  background: rgba(0,0,0,.35);
  opacity:0;
  pointer-events:none;
  transition: opacity .25s ease;
  z-index:20;
}
.dim-overlay.show{ opacity:1; pointer-events:auto; }

.secret-toast{
  position:fixed;
  left:50%;
  bottom:32px;
  transform: translateX(50vw);
  max-width:320px;
  padding:14px 16px;
  border-radius:18px;
  background: rgba(255,255,255,.96);
  box-shadow: 0 16px 45px rgba(0,0,0,.35);
  font-size:.9rem;
  line-height:1.4;
  z-index:30;
  transition: transform .25s ease;
}
.secret-toast.show{ transform: translateX(-50%); }

/* ===== 3 Pink columns ONLY LEFT ===== */
.side-hearts{
  position:fixed;
  top:0;
  height:100vh;
  pointer-events:none;
  z-index:0;
  background-repeat: repeat-y;
  background-size: 48px 48px;
}

.side-hearts-left{
  background-image: radial-gradient(circle, rgba(255,255,255,.55) 0, rgba(255,255,255,0) 58%);
}

.side-col-1{ left: 0px;   width: 110px; opacity: .18; }
.side-col-2{ left: 92px;  width: 90px;  opacity: .13; filter: blur(.2px); }
.side-col-3{ left: 168px; width: 70px;  opacity: .09; filter: blur(.4px); }

/* Floating hearts */
#floatingHeartsLayer{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:0;
  overflow:hidden;
}
.floating-heart{
  position:absolute;
  bottom:-40px;
  opacity:0;
  animation-name: floatUp;
  animation-timing-function: linear;
  animation-iteration-count: 1;
  will-change: transform, opacity;
}
@keyframes floatUp{
  0%{ transform: translateY(0) translateX(0) scale(.7); opacity:0; }
  10%{ opacity:.9; }
  50%{ transform: translateY(-40vh) translateX(-10px) scale(1); opacity:1; }
  100%{ transform: translateY(-90vh) translateX(15px) scale(1.1); opacity:0; }
}

/* Random photos layer */
#randomPhotosLayer{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:0;
  overflow:hidden;
}

/* ✅ FORCE ALL PHOTOS VERTICAL */
.random-photo{
  position:absolute;
  width: 260px;
  max-width: 24vw;

  aspect-ratio: 3 / 4;      /* vertical */
  height: auto;

  border-radius:18px;
  box-shadow: 0 18px 40px rgba(0,0,0,.35);
  opacity:0;

  object-fit: cover;        /* crop nicely */
  object-position: center;  /* keep faces centered */

  animation: popFade 9s ease-in-out forwards;
  transition: transform .12s linear;
  will-change: transform, opacity;
}
@keyframes popFade{
  0%{ opacity:0; }
  15%{ opacity:1; }
  60%{ opacity:1; }
  100%{ opacity:0; }
}

/* Apple Music Elite Player */
.music-player{
  position: fixed;
  top: 18px;
  right: 18px;
  width: 340px;
  z-index: 120;

  display: flex;
  gap: 14px;
  align-items: center;

  background: rgba(35, 14, 26, 0.18);
  border: 1px solid rgba(255, 255, 255, 0.16);
  backdrop-filter: blur(18px);
  -webkit-backdrop-filter: blur(18px);

  border-radius: 20px;
  padding: 10px;

  box-shadow:
    0 18px 40px rgba(0,0,0,0.22),
    inset 0 1px 0 rgba(255,255,255,0.14);
}
.music-player.paused{ opacity: 0.92; }

.player-art{
  position: relative;
  width: 82px;
  height: 82px;
  flex: 0 0 auto;
}
.player-art img{
  width: 82px;
  height: 82px;
  border-radius: 18px;
  object-fit: cover;
  box-shadow: 0 12px 28px rgba(0,0,0,0.35);
  border: 1px solid rgba(255,255,255,0.18);
  position: relative;
  z-index: 2;
  display: block;
}
.art-glow{
  position: absolute;
  inset: -12px;
  border-radius: 26px;
  background: radial-gradient(circle at 30% 30%,
    rgba(255, 86, 194, 0.35),
    rgba(255, 0, 120, 0.05) 60%,
    rgba(0,0,0,0) 70%
  );
  filter: blur(12px);
  z-index: 1;
  opacity: 0.85;
}

.player-info{
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
  gap: 8px;
}
.now-playing{
  display:flex;
  align-items:center;
  gap:8px;
  font-size: .70rem;
  letter-spacing: .10em;
  text-transform: uppercase;
  color: rgba(255,255,255,0.88);
  opacity: 0.95;
}
.np-dot{
  width:8px;height:8px;border-radius:999px;
  background: #ff5aa5;
  box-shadow: 0 0 18px rgba(255,90,165,0.55);
  animation: npPulse 1.25s infinite;
}
.np-bars{
  margin-left:auto;
  display:inline-flex;
  gap:3px;
  opacity: 0.95;
}
.np-bars i{
  display:block;
  width:3px;height:10px;border-radius:6px;
  background: linear-gradient(180deg,#ff86c2,#ff3f8f);
  transform-origin: bottom;
  animation: npBars .9s infinite ease-in-out;
}
.np-bars i:nth-child(2){ animation-delay: .12s; }
.np-bars i:nth-child(3){ animation-delay: .24s; }
.np-bars i:nth-child(4){ animation-delay: .36s; }

@keyframes npPulse{
  0%,100%{ transform: scale(1); opacity:.8; }
  50%{ transform: scale(1.35); opacity:1; }
}
@keyframes npBars{
  0%,100%{ transform: scaleY(.35); opacity:.65; }
  50%{ transform: scaleY(1.15); opacity:1; }
}
.music-player.paused .np-dot,
.music-player.paused .np-bars i{
  animation-play-state: paused;
  opacity: 0.45;
}

.player-title{
  font-weight: 700;
  font-size: 1.02rem;
  color: rgba(255,255,255,0.95);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.player-sub{
  font-size: 0.80rem;
  color: rgba(255,255,255,0.68);
  margin-top: -6px;
}

.progress-wrap{
  display: grid;
  grid-template-columns: 44px 1fr 44px;
  align-items: center;
  gap: 10px;
  margin-top: 2px;
}
.time{
  font-size: 0.70rem;
  color: rgba(255,255,255,0.65);
  text-align: center;
}
.progress-container{
  position: relative;
  height: 6px;
  background: rgba(255,255,255,0.14);
  border-radius: 999px;
  overflow: hidden;
  cursor: pointer;
  border: 1px solid rgba(255,255,255,0.10);
}
.progress-bar{
  height: 100%;
  width: 0%;
  background: linear-gradient(90deg,#ff86c2,#ff3f8f);
  border-radius: 999px;
}
.progress-knob{
  position: absolute;
  top: 50%;
  left: 0%;
  width: 12px;
  height: 12px;
  border-radius: 999px;
  background: rgba(255,255,255,0.92);
  transform: translate(-50%, -50%);
  box-shadow: 0 10px 18px rgba(0,0,0,0.28);
  pointer-events: none;
}

.player-controls{
  display:flex;
  align-items:center;
  gap: 10px;
  margin-top: 2px;
}
.player-controls button{
  border: 1px solid rgba(255,255,255,0.16);
  background: rgba(255,255,255,0.10);
  color: rgba(255,255,255,0.92);
  border-radius: 999px;
  width: 70px;
  height: 30px;
  display:flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
  transition: transform .15s ease, background .15s ease, box-shadow .15s ease;
  box-shadow: 0 10px 18px rgba(0,0,0,0.18);
}
.player-controls button:hover{
  transform: translateY(-1px);
  background: rgba(255,255,255,0.16);
  box-shadow: 0 14px 24px rgba(0,0,0,0.22);
}
.player-controls button.primary{
  border: 1px solid rgba(255,90,165,0.30);
  background: rgba(255,90,165,0.20);
}
.player-controls button.primary:hover{
  background: rgba(255,90,165,0.28);
}

.vol{
  display:flex;
  align-items:center;
  gap: 8px;
  margin-left: 2px;
  padding: 6px 10px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,0.12);
  background: rgba(255,255,255,0.07);
}
.vol-ico{ font-size: 0.85rem; opacity: 0.9; }
.vol input[type="range"]{
  width: 92px;
  accent-color: #ff5aa5;
}

.viz{
  display:flex;
  gap: 4px;
  height: 14px;
  align-items: flex-end;
  opacity: 0.85;
  margin-top: 2px;
}
.viz span{
  width: 3px;
  height: 6px;
  border-radius: 6px;
  background: linear-gradient(180deg,#ff86c2,#ff3f8f);
  transform-origin: bottom;
  animation: vizIdle 1.1s infinite ease-in-out;
}
.viz span:nth-child(2){ animation-delay: .08s; }
.viz span:nth-child(3){ animation-delay: .16s; }
.viz span:nth-child(4){ animation-delay: .24s; }
.viz span:nth-child(5){ animation-delay: .32s; }
.viz span:nth-child(6){ animation-delay: .40s; }
.viz span:nth-child(7){ animation-delay: .48s; }
.viz span:nth-child(8){ animation-delay: .56s; }
.viz span:nth-child(9){ animation-delay: .64s; }
.viz span:nth-child(10){ animation-delay: .72s; }

@keyframes vizIdle{
  0%,100%{ transform: scaleY(.45); opacity:.7; }
  50%{ transform: scaleY(1.10); opacity:1; }
}
.music-player.paused .viz span{
  animation-play-state: paused;
  opacity: 0.45;
}

/* Responsive */
@media (max-width: 900px){
  .shell{ flex-direction:column; padding:12px; }

  .sidebar{
    width:100%;
    height:auto;
    position:static;
    padding:16px 12px 8px;
    border-radius:18px;
    background: rgba(255,255,255,.85);
    box-shadow: 0 12px 35px rgba(116,35,69,.35);
    margin-bottom:12px;
  }

  .nav-list{
    flex-direction:row;
    flex-wrap:wrap;
    justify-content:flex-end;
  }
  .nav-link{ padding:6px 10px; font-size:.78rem; }

  .content{ padding:0 4px 16px; }
  .section-inner{ padding:22px 18px; border-radius:24px; }

  .section-header h1.title{ font-size:2rem; }
  .section-header h2{ font-size:1.6rem; }

  .memories-layout{
    grid-template-columns: 1fr;
  }
  .memories-grid{
    grid-template-columns: 1fr;
  }

  .side-hearts{ display:none; }

  .music-player{
    left: 12px;
    right: 12px;
    width: auto;
    top: auto;
    bottom: 12px;
  }

  .random-photo{
    width: 210px;
    max-width: 46vw;
  }
}
